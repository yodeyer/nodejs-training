(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{373:function(e,t,r){"use strict";var n=r(1),o=r(0);t.a=o.a.extend({name:"measurable",props:{height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},computed:{measurableStyles:function(){var e={},t=Object(n.a)(this.height),r=Object(n.a)(this.minHeight),o=Object(n.a)(this.minWidth),c=Object(n.a)(this.maxHeight),l=Object(n.a)(this.maxWidth),d=Object(n.a)(this.width);return t&&(e.height=t),r&&(e.minHeight=r),o&&(e.minWidth=o),c&&(e.maxHeight=c),l&&(e.maxWidth=l),d&&(e.width=d),e}}})},374:function(e,t,r){"use strict";var n=r(0);t.a=n.a.extend({name:"v-card-title",functional:!0,props:{primaryTitle:Boolean},render:function(e,t){var data=t.data,r=t.props,n=t.children;return data.staticClass=("v-card__title "+(data.staticClass||"")).trim(),r.primaryTitle&&(data.staticClass+=" v-card__title--primary"),e("div",data,n)}})},375:function(e,t,r){"use strict";r(376),r(377);var n=r(9);var o=r(0).a.extend({name:"elevatable",props:{elevation:[Number,String]},computed:{computedElevation:function(){return this.elevation},elevationClasses:function(){return this.computedElevation?(e={},t="elevation-"+this.computedElevation,r=!0,t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e):{};var e,t,r}}}),c=r(373),l=r(7),d=r(3),v=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e},h=Object(d.a)(n.a,o,c.a,l.a).extend({name:"v-sheet",props:{tag:{type:String,default:"div"},tile:Boolean},computed:{classes:function(){return v({"v-sheet":!0,"v-sheet--tile":this.tile},this.themeClasses,this.elevationClasses)},styles:function(){return this.measurableStyles}},render:function(e){var data={class:this.classes,style:this.styles,on:this.$listeners};return e(this.tag,this.setBackgroundColor(this.color,data),this.$slots.default)}}),m=r(41),_=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var t in source)Object.prototype.hasOwnProperty.call(source,t)&&(e[t]=source[t])}return e};t.a=Object(d.a)(m.a,h).extend({name:"v-card",props:{flat:Boolean,hover:Boolean,img:String,raised:Boolean},computed:{classes:function(){return _({"v-card":!0,"v-card--flat":this.flat,"v-card--hover":this.hover},h.options.computed.classes.call(this))},styles:function(){var style=_({},h.options.computed.styles.call(this));return this.img&&(style.background='url("'+this.img+'") center center / cover no-repeat'),style}},render:function(e){var t=this.generateRouteLink(this.classes),r=t.tag,data=t.data;return data.style=this.styles,e(r,this.setBackgroundColor(this.color,data),this.$slots.default)}})},376:function(e,t,r){},377:function(e,t,r){},378:function(e,t,r){},379:function(e,t,r){},380:function(e,t,r){},381:function(e,t,r){"use strict";r(117);var n=r(83);t.a=Object(n.a)("flex")},382:function(e,t,r){"use strict";r(117);var n=r(83);t.a=Object(n.a)("layout")},384:function(e,t,r){"use strict";var n=r(1),o=r(375),c=(r(378),r(379),r(373)),l=r(3),d=Object(l.a)(c.a).extend({name:"v-responsive",props:{aspectRatio:[String,Number]},computed:{computedAspectRatio:function(){return Number(this.aspectRatio)},aspectStyle:function(){return this.computedAspectRatio?{paddingBottom:1/this.computedAspectRatio*100+"%"}:void 0},__cachedSizer:function(){return this.aspectStyle?this.$createElement("div",{style:this.aspectStyle,staticClass:"v-responsive__sizer"}):[]}},methods:{genContent:function(){return this.$createElement("div",{staticClass:"v-responsive__content"},this.$slots.default)}},render:function(e){return e("div",{staticClass:"v-responsive",style:this.measurableStyles,on:this.$listeners},[this.__cachedSizer,this.genContent()])}}),v=r(6),h=d.extend({name:"v-img",props:{alt:String,contain:Boolean,src:{type:[String,Object],default:""},gradient:String,lazySrc:String,srcset:String,sizes:String,position:{type:String,default:"center center"},transition:{type:[Boolean,String],default:"fade-transition"}},data:function(){return{currentSrc:"",image:null,isLoading:!0,calculatedAspectRatio:void 0}},computed:{computedAspectRatio:function(){return this.normalisedSrc.aspect},normalisedSrc:function(){return"string"==typeof this.src?{src:this.src,srcset:this.srcset,lazySrc:this.lazySrc,aspect:Number(this.aspectRatio||this.calculatedAspectRatio)}:{src:this.src.src,srcset:this.srcset||this.src.srcset,lazySrc:this.lazySrc||this.src.lazySrc,aspect:Number(this.aspectRatio||this.src.aspect||this.calculatedAspectRatio)}},__cachedImage:function(){if(!this.normalisedSrc.src&&!this.normalisedSrc.lazySrc)return[];var e=[],t=this.isLoading?this.normalisedSrc.lazySrc:this.currentSrc;this.gradient&&e.push("linear-gradient("+this.gradient+")"),t&&e.push('url("'+t+'")');var image=this.$createElement("div",{staticClass:"v-image__image",class:{"v-image__image--preload":this.isLoading,"v-image__image--contain":this.contain,"v-image__image--cover":!this.contain},style:{backgroundImage:e.join(", "),backgroundPosition:this.position},key:+this.isLoading});return this.transition?this.$createElement("transition",{attrs:{name:this.transition,mode:"in-out"}},[image]):image}},watch:{src:function(){this.isLoading?this.loadImage():this.init()},"$vuetify.breakpoint.width":"getSrc"},mounted:function(){this.init()},methods:{init:function(){if(this.normalisedSrc.lazySrc){var e=new Image;e.src=this.normalisedSrc.lazySrc,this.pollForSize(e,null)}this.normalisedSrc.src&&this.loadImage()},onLoad:function(){this.getSrc(),this.isLoading=!1,this.$emit("load",this.src)},onError:function(){Object(v.a)("Image load failed\n\nsrc: "+this.normalisedSrc.src,this),this.$emit("error",this.src)},getSrc:function(){this.image&&(this.currentSrc=this.image.currentSrc||this.image.src)},loadImage:function(){var e=this,image=new Image;this.image=image,image.onload=function(){image.decode?image.decode().catch(function(t){Object(v.b)("Failed to decode image, trying to render anyway\n\nsrc: "+e.normalisedSrc.src+(t.message?"\nOriginal error: "+t.message:""),e)}).then(e.onLoad):e.onLoad()},image.onerror=this.onError,image.src=this.normalisedSrc.src,this.sizes&&(image.sizes=this.sizes),this.normalisedSrc.srcset&&(image.srcset=this.normalisedSrc.srcset),this.aspectRatio||this.pollForSize(image),this.getSrc()},pollForSize:function(img){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;!function r(){var n=img.naturalHeight,o=img.naturalWidth;n||o?e.calculatedAspectRatio=o/n:null!=t&&setTimeout(r,t)}()},__genPlaceholder:function(){if(this.$slots.placeholder){var e=this.isLoading?[this.$createElement("div",{staticClass:"v-image__placeholder"},this.$slots.placeholder)]:[];return this.transition?this.$createElement("transition",{attrs:{name:this.transition}},e):e[0]}}},render:function(e){var t=d.options.render.call(this,e);return t.data.staticClass+=" v-image",t.data.attrs={role:this.alt?"img":void 0,"aria-label":this.alt},t.children=[this.__cachedSizer,this.__cachedImage,this.__genPlaceholder(),this.genContent()],e(t.tag,t.data,t.children)}}).extend({name:"v-card-media",mounted:function(){Object(v.c)("v-card-media",this.src?"v-img":"v-responsive",this)}}),m=r(374);r.d(t,"a",function(){return f});var _=Object(n.c)("v-card__actions"),f=Object(n.c)("v-card__text");o.a,m.a},385:function(e,t,r){"use strict";r(380);var n=r(42),o=r(9),c=r(24),l=r(0).a.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}}),d=r(3);t.a=Object(d.a)(o.a,c.a,l).extend({name:"v-alert",props:{dismissible:Boolean,icon:String,outline:Boolean,type:{type:String,validator:function(e){return["info","error","success","warning"].includes(e)}}},computed:{computedColor:function(){return this.type&&!this.color?this.type:this.color||"error"},computedIcon:function(){if(this.icon||!this.type)return this.icon;switch(this.type){case"info":return"$vuetify.icons.info";case"error":return"$vuetify.icons.error";case"success":return"$vuetify.icons.success";case"warning":return"$vuetify.icons.warning"}}},methods:{genIcon:function(){return this.computedIcon?this.$createElement(n.a,{class:"v-alert__icon"},this.computedIcon):null},genDismissible:function(){var e=this;return this.dismissible?this.$createElement("a",{class:"v-alert__dismissible",on:{click:function(){e.isActive=!1}}},[this.$createElement(n.a,{props:{right:!0}},"$vuetify.icons.cancel")]):null}},render:function(e){var t=[this.genIcon(),e("div",this.$slots.default),this.genDismissible()],r=e("div",(this.outline?this.setTextColor:this.setBackgroundColor)(this.computedColor,{staticClass:"v-alert",class:{"v-alert--outline":this.outline},directives:[{name:"show",value:this.isActive}],on:this.$listeners}),t);return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[r]):r}})},394:function(e,t,r){},405:function(e,t,r){"use strict";var n=r(394);r.n(n).a},425:function(e,t,r){"use strict";r.r(t);var n={props:{quote:{type:String,default:""},cite:{type:String,default:""}}},o=(r(405),r(23)),c={components:{BlockQuote:Object(o.a)(n,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("blockquote",[r("p",[e._v(e._s(e.quote))])]),e._v(" "),e.cite?r("cite",[e._v("-- "+e._s(e.cite))]):e._e()])},[],!1,null,"2d605360",null).exports}},l=r(84),d=r.n(l),v=r(385),h=r(375),m=r(384),_=r(374),f=r(381),x=r(382),S=Object(o.a)(c,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-layout",{attrs:{column:"","justify-center":"","align-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md6:""}},[r("v-card",[r("v-card-title",{staticClass:"headline primary--text"},[e._v("Serveur HTTP")]),e._v(" "),r("v-card-text",[r("v-card-title",{staticClass:"subheading primary--text"},[e._v("Node.js et HTTP")]),e._v(" "),r("p",[e._v('\n            Node.js permet de créer "out-of-the-box" un serveur HTTP simple, grâce au module '),r("code",[e._v("http")]),e._v(" compris dans son coeur.\n\n            "),r("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("              "),r("code",{attrs:{language:"js"}},[e._v("\nconst http = require('http');\n\nhttp.createServer(function (req, res) {\n  res.write('Hello World!');\n  res.end();\n}).listen(8080);\n            ")])]),r("br"),e._v("\n            Le serveur ci-dessus :\n            "),r("ul",[r("li",[e._v("écoute sur le port 8080")]),e._v(" "),r("li",[e._v('renvoie la réponse "Hello World" aux requêtes entrantes')])]),e._v(" "),r("br"),e._v(" "),r("v-alert",{attrs:{value:!0,color:"info",icon:"info",outline:""}},[e._v("\n              Bien qu'il soit tout à fait possible d'utiliser uniquement "),r("code",[e._v("http")]),e._v(" pour créer des serveurs HTTP, la plupart des projets utilisent un framework comme "),r("a",{attrs:{href:"https://expressjs.com/fr/"}},[e._v("Express")]),e._v(", "),r("a",{attrs:{href:"https://hapijs.com/"}},[e._v("hapi")]),e._v(" ou "),r("a",{attrs:{href:"https://koajs.com/"}},[e._v("koa")]),e._v(".\n            ")])],1)],1),e._v(" "),r("v-card-text",[r("v-card-title",{staticClass:"headline primary--text"},[e._v("Express")]),e._v(" "),r("BlockQuote",{attrs:{quote:"Express est une infrastructure d'applications Web Node.js minimaliste et flexible qui fournit un ensemble de fonctionnalités robuste pour les applications Web et mobiles.",cite:"https://expressjs.com/fr/"}}),e._v(" "),r("p",[e._v("\n            Concrètement, Express apporte les améliorations suivantes :\n            "),r("ul",[r("li",[e._v("Routage des URL par chemin et verbe HTTP")]),e._v(" "),r("li",[e._v("Parsage des paramètres d'entrée")]),e._v(" "),r("li",[e._v("Gestion des fichiers statiques")]),e._v(" "),r("li",[e._v("Templating HTML")])]),e._v(" "),r("br"),e._v("\n            Il est également possible d'ajouter des fonctionnalités grâce au mécanisme de "),r("code",[e._v("middleware")]),e._v("."),r("br"),e._v(" "),r("v-card-title",{staticClass:"subheading primary--text"},[e._v("Anatomie du serveur")]),e._v(" "),r("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[r("code",{attrs:{language:"js"}},[e._v("\nconst express = require('express');\nconst app = express();\n\napp.get('/hello/:name', (req, res) => {\n  res.send(`Hello ${req.params.name}!`);\n});\n\napp.listen(3000, function () {\n  console.log('Example app listening on port 3000!');\n});\n            ")])]),r("br")],1),e._v(" "),r("p",[e._v("\n            Dans l'exemple ci-dessus, on définit la fonction qui sera executée lorsque le serveur une recevra une requête "),r("code",[e._v("GET")]),e._v(" avec une url de la forme "),r("code",[e._v("/hello/:name")]),e._v(" avec "),r("code",[e._v(":name")]),e._v(" qui est un paramètre qui peut-être récupéré dans la variable "),r("code",[e._v("req.params.name")]),e._v("."),r("br"),e._v("\n            Cette fonction est appelée "),r("code",[e._v("middleware")]),e._v(" et peut être définie de la manière suivante :\n            "),r("ul",[r("li",[e._v("si elle ne concerne qu'une méthode HTTP pour une URL donnée : on utilise "),r("a",{attrs:{href:"http://expressjs.com/en/4x/api.html#app.get.method"}},[e._v("app.get()")]),e._v(",  "),r("a",{attrs:{href:"http://expressjs.com/en/4x/api.html#app.post.method"}},[e._v("app.post()")]),e._v("...")]),e._v(" "),r("li",[e._v("sinon : on utilise "),r("a",{attrs:{href:"http://expressjs.com/en/4x/api.html#app.use.method"}},[e._v("app.use()")]),e._v(" qui permet de définir un middleware qui sera executé quelque soit la requête (ce qui est utile pour écrire des logs par exemple, compression de la réponse...).")])]),e._v(" "),r("strong",[e._v("A noter : les middlewares sont executés dans l'ordre dans lequel ils sont déclarés.")]),e._v(" "),r("v-alert",{attrs:{value:!0,color:"info",icon:"info",outline:""}},[e._v("\n              Il est possible d'utiliser des expressions régulières, des masques et / ou des gestionnaires de routage. Pour plus d'information se référer à la documentation officielle : "),r("a",{attrs:{href:"https://expressjs.com/fr/guide/routing.html"}},[e._v("Express routing")]),e._v(".\n            ")])],1)],1),e._v(" "),r("v-card-text",[r("v-card-title",{staticClass:"subheading primary--text"},[e._v("Ecrire un middleware")]),e._v(" "),r("p",[e._v("\n            Les paramètres d'une fonction "),r("code",[e._v("middleware")]),e._v(" sont :\n            "),r("ul",[r("li",[e._v("L'objet "),r("a",{attrs:{href:"http://expressjs.com/fr/4x/api.html#req"}},[e._v("Request")]),e._v(" "),r("code",[e._v("req")]),e._v(", qui encapsule l'objet "),r("a",{attrs:{href:"https://nodejs.org/api/http.html#http_class_http_incomingmessage"}},[e._v("IncomingMessage")]),e._v(" en ajoutant "),r("a",{attrs:{href:"http://expressjs.com/en/4x/api.html#req"}},[e._v("un ensemble de propriétés")]),e._v(" correspondant à la requête HTTP parsée comme : "),r("code",[e._v("baseUrl")]),e._v(", "),r("code",[e._v("path")]),e._v(", "),r("code",[e._v("body")]),e._v(", "),r("code",[e._v("params")]),e._v(" ou "),r("code",[e._v("method")]),e._v(" ;")]),e._v(" "),r("li",[e._v("L'objet "),r("a",{attrs:{href:"http://expressjs.com/fr/4x/api.html#res"}},[e._v("Response")]),e._v(" "),r("code",[e._v("res")]),e._v(" ;")]),e._v(" "),r("li",[r("code",[e._v("next")]),e._v(" qui est la fonction à appeler pour passer au middleware suivant dans le cycle de l'application")])]),e._v(" "),r("br"),e._v("\n            Par exemple :\n            "),r("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[r("code",{attrs:{language:"js"}},[e._v("\n(req, res, next) => { // Définition d'une fonction middleware\n  // Traitement\n  next(); // Appel du middleware suivant\n};\n            ")])]),r("br"),e._v("\n            Ainsi, un middleware doit (au choix) :\n            "),r("ul",[r("li",[e._v("Passer au middleware suivant en appelant "),r("code",[e._v("next()")]),e._v(" (après avoir modifié la requête "),r("code",[e._v("req")]),e._v(" et/ou la réponse "),r("code",[e._v("res")]),e._v(" par exemple);")]),e._v(" "),r("li",[e._v("Répondre immédiatement au client en appelant "),r("code",[e._v("res.send()")]),e._v(", ce qui stoppera le traitement de la requête et n'exécutera pas les middlewares suivants ;")]),e._v(" "),r("li",[e._v("Emettre une erreur en appelant "),r("code",[e._v("next()")]),e._v(" avec une erreur en paramètre, ce qui stoppera l'exécution des middlewares \"normaux\" et fera passer la requête dans les middlewares d'erreur (voir ci-dessous).")])])]),e._v(" "),r("p",[e._v("\n            Les middlewares d'erreur sont appelés dans le cas où une erreur est passé en premier paramètre du callback "),r("code",[e._v("next(err);")]),e._v(".\n            Par exemple :\n            "),r("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[r("code",{attrs:{language:"js"}},[e._v("\n(err, req, res, next) => { // Définition d'une fonction middleware d'erreur\n  res.status(500).send({ error: 'something blew up' });\n};\n            ")])]),r("br"),e._v(" "),r("v-alert",{attrs:{value:!0,color:"warning",icon:"warning",outline:""}},[e._v("\n              Le paramètre "),r("code",[e._v("next")]),e._v(" est obligatoire même s'il n'est pas utilisé. En effet, c'est le nombre de paramètres qui permet à Express de différencier les middlewares d'erreur.\n            ")]),e._v(" "),r("v-alert",{attrs:{value:!0,color:"info",icon:"info",outline:""}},[e._v("\n              Il existe de nombreux middleware out-of-the-box pour Express : "),r("a",{attrs:{href:"http://expressjs.com/en/resources/middleware.html"}},[e._v("Middlewares")]),e._v(".\n            ")])],1)],1),e._v(" "),r("v-card-text",[r("v-card-title",{staticClass:"subheading secondary--text"},[e._v("TP Fil rouge")]),e._v(" "),r("p",[e._v("\n            Créer et tester un serveur HTTP avec Express qui :\n            "),r("ol",[r("li",[e._v("répond une erreur 404 sur un chemin qui n'existe pas ;")]),e._v(" "),r("li",[e._v("répond un statut 200 sur une requête "),r("code",[e._v("GET /browse/foo")]),e._v(" (avec "),r("code",[e._v("foo")]),e._v(" qui est un paramètre) et répond avec le contenu du dossier correspondant au paramètre du chemin (le nom, le type et la taille au format JSON), le dossier "),r("code",[e._v("foo")]),e._v(" étant à l'intérieur d'un répertoire "),r("code",[e._v("static")]),e._v(" présent à la racine du projet) ;")]),e._v(" "),r("li",[e._v("renvoie une erreur 404 si le dossier n'est pas trouvé (utiliser un middleware d'erreur) ;")]),e._v(" "),r("li",[e._v("loggue les requêtes / réponses du serveur (utiliser "),r("a",{attrs:{href:"https://www.npmjs.com/package/morgan"}},[e._v("morgan")]),e._v(") ;")]),e._v(" "),r("li",[e._v("répond au format HTML sur une requête "),r("code",[e._v("GET /browse/foo")]),e._v(" si le header "),r("code",[e._v("accept")]),e._v(" contient "),r("code",[e._v("html")]),e._v(" : pour cela, utiliser un moteur de template pour générer du HTML, c.f. "),r("a",{attrs:{href:"https://expressjs.com/en/guide/using-template-engines.html"}},[e._v("Express template engines")]),e._v(" (nous recommandons "),r("a",{attrs:{href:"https://www.npmjs.com/package/express-handlebars"}},[e._v("express-handlebars")]),e._v(").")])]),e._v(" "),r("v-alert",{attrs:{value:!0,color:"info",icon:"info",outline:""}},[e._v("\n              Il est possible d'obtenir des logs d'express pour debugguer plus facilement : "),r("a",{attrs:{href:"https://expressjs.com/fr/guide/debugging.html"}},[e._v("https://expressjs.com/fr/guide/debugging.html")]),e._v(".\n            ")]),e._v(" "),r("v-alert",{attrs:{value:!0,color:"warning",icon:"warning",outline:""}},[e._v("\n              Il faut bien traiter les questions dans l'ordre (tests compris) avant de passer à la question suivante.\n            ")])],1)],1)],1)],1)],1)},[],!1,null,null,null);t.default=S.exports;d()(S,{VAlert:v.a,VCard:h.a,VCardText:m.a,VCardTitle:_.a,VFlex:f.a,VLayout:x.a})}}]);